{% extends 'base.html.twig' %}

{% block title %}New Post{% endblock %}

{% block body %}
    <div class="postNew" {{ stimulus_controller("newformslide test-react module-form")}}>
        <div class="loaderContainer" {{ stimulus_target("newformslide","loader")}}>
            <span class="loader"></span>
        </div>

        {#? Light Box #}

            <div class="lightboxContainer" {{ stimulus_target("module-form","lightboxContainer")}}>
                <div class="lightbox" {{ stimulus_target("module-form","lightbox")}}>
                    
                    <h2 class="titre titre--24--500">Choisissez Votre module</h2>

                    <div class="allModule" {{ stimulus_target("module-form","displayModule")}}>

                    </div>
                    
                    <span class="close" {{ stimulus_action("module-form","closeLightbox",'click')}}>
                        close
                    </span>
                </div>
            </div>

        {#! LightBox #}



        <div class="formContainer" {{ stimulus_controller('preview')}}>
            
            <div class="formCP" {{ stimulus_target("module-form","editContentContainer")}}>

                <div class="buttonContainer">
                    <button class="button button--format  " type="button" 
                        {{ stimulus_action( 
                            'newformslide', 
                            'goToIndex', 
                            'click', 
                            {'index' : 0} 
                        )|  stimulus_target(
                                'newformslide',
                                'btnformpart'
                            )
                        }}>part1</button>

                    <button class="button button--format " type="button" 
                        {{ stimulus_action( 
                            'newformslide', 
                            'goToIndex', 
                            'click', 
                            {'index' : 1} 
                        )|  stimulus_target(
                                'newformslide',
                                'btnformpart'
                            )
                        }}>part2</button>

                    <button class="button button--format " type="button" 
                        {{ stimulus_action( 
                            'newformslide', 
                            'goToIndex', 
                            'click', 
                            {'index' : 2} 
                        )|  stimulus_target(
                                'newformslide',
                                'btnformpart'
                            )
                        }}>part3</button>

                </div>

                {{ form_start(form) }}

                    <div {{ stimulus_target('newformslide','formslide')}} class="formSlide">
                        <div class="formfieldContainer" >
                            {{ form_label(form.title) }}
                            {{ form_widget(form.title)}}
                        </div>

                        <div class="formfieldContainer">
                            {{ form_label(form.description) }}
                            {{ form_widget(form.description) }}
                        </div>
                    </div>

                    <div {{ stimulus_target('newformslide','formslide')}} class="formSlide">
                        <div class="formfieldContainer">
                            {{ form_label(form.thematique) }}
                            {{ form_widget(form.thematique) }}
                        </div>

                        <div class="formfieldContainer">
                            {{ form_label(form.sousThematiques) }}
                            {{ form_widget(form.sousThematiques) }}
                        </div>

                        <div class="formfieldContainer">
                            {{ form_label(form.type) }}
                            {{ form_widget(form.type) }}
                    
                        </div>
                        <div class="formfieldContainer">
                            {{ form_label(form.publishAt) }}
                            {{ form_widget(form.publishAt) }}
                    
                        </div>
                        
                    </div>

                    <div {{ stimulus_target('newformslide','formslide')}} class="formSlide">
                        <div class='buttonContainer'>
                            <button type="button" class="button button--format text text--18-500" {{ stimulus_action('module-form','fireLightbox')}}> Ajouter un module </button>
                            <button type="button" class="button button--format text text--18-500" {{ stimulus_action('module-form','fireLightbox')}}> ChangeOrder </button>
                        </div>

                        {# <div class="formfieldContainer"> #}
                            
                            {{ form_widget(form.content) }}
                    
                        {# </div> #}
                        
                        <div class=" moduleChoosen" {{ stimulus_action('module-form','Module')}}>
                            
                            {#! Container neo pour les modules #}
                            <div class="moduleChoosen__list" {{ stimulus_target('module-form','moduleList')}}>
                                

                                {# Module individuel gener√© par stimulus #}
                                {# <div class="moduleChoosen__module">
                                    
                                    
                                    
                                        <p class="titre titre--20--500">MODULE TEXTE</p>
                                        <div class="module__btns">
                                            <button type="button" class="button button--format">Modifier</button>
                                            <button type="button" class="button button--format">Supprimer</button>
                                        </div>
                                    

                                </div> #}


                            </div>
                        </div>
                        {# <form {{ stimulus_action('mudule-form','getData')}} class="formfieldContainer"> #}
                            
                        {# </form> #}

                    </div>

                        {# <div class="formfieldContainer">
                            {{ form_row(form.content) }}
                        </div> #}
                    <div class="buttonContainer">
                        <button type="button" class="button button--format" {{stimulus_target('newformslide','previous')  | stimulus_action('newformslide','previous')}}>Previous</button>
                        <button type="button" class="button button--format" {{stimulus_target('newformslide','next')  | stimulus_action('newformslide','next')}}>Next</button>
                    </div>



                    {# <button class="btn btn-primary">Create</button> #}
                {{ form_end(form) }}
                {# <textarea {{ stimulus_action('test-react', 'testFonction') }} id="" cols="30" rows="10"></textarea> #}
            </div>

            <div class="formPreview" >
                            <h1>Nouveau post</h1>

                {#! En-tete de l'article  #}

                <div class="previewHeader">

                    <h2 id="preview_title" class="titre titre--24-600" {{ stimulus_target('preview','titreoutput') }}>Titre de l' article</h2>
                    <p id="preview_description" class="text text--20-600" {{ stimulus_target('preview','descriptionoutput') }}>
                            La description est un text qui lorem, ipsum dolor sit amet consectetur adipisicing elit. Dolorem recusandae consequuntur reprehenderit provident ab assumenda delectus, reiciendis quidem, voluptates tempora nobis eos magni! Sed aliquid corrupti laudantium accusantium ipsam ipsum neque mollitia aspernatur rem nisi numquam culpa pariatur itaque, eum quia voluptatem perspiciatis incidunt perferendis. Blanditiis exercitationem reprehenderit ipsam officia!
                    </p>

                </div>
                    
                {#! Contenu de l'article  #}
                <div class="previewContent">

                    <div id='react-container' {{ react_component('Article/Container',{'content':false}) }}  {{ stimulus_target('test-react', 'reactContainer') }}>
                        <span class="loader"></span>
                    </div>

                </div>

            </div>

        </div>
    </div>

    {# {{ include('back/post/_form.html.twig') }} #}
    

    <a href="{{ path('app_back_post_index') }}">back to list</a>
{% endblock %}
{% block script %}

{% endblock %}
